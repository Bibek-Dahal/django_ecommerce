{% extends 'store/base.html'%}
{% load static%}
{%block title%}product detail{%endblock title%}
{%block carousel%}{%endblock%}

{%block content%}
    <div class="d-flex justify-content-center text-primary" id="spin">
        <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
        </div>
    </div>
    <div class="container mt-2" id="one">
        <div class="row justify-content-center">
            <div class="col-md-6" >
                
                    <div class="col-12">
                        <div style="height: 300px;">
                    
                            <img src="{{prod.show_img}}" class="figure-img  rounded" alt="..." style="height: 100%; width: 100%; object-fit: contain" id='main_img'>
                               
                              
                        </div>
                          <div class="col-12 card">
                              
                            {%if prod.id in cart_keys%}
                              
                               <a href="{% url 'cart:cartDetail'%}" role="button" onclick="goToCart('{{p.product.id}}')" class="btn btn-warning">Go To Cart</a>
                                {%else%}
                                    
                                    <button class="btn btn-primary" data-pid="{{p.product.id}}" id="add_to_cart" onclick="addToCart(this,'{{prod.id}}','{{prod.discount_price}}','{{prod.title}}')">Add To Cart</button>
        
                            {%endif%}
                        </div>
                    </div>
                    
            </div>

            <div class="col-md-6">
                <div class="row">
                    <div class="col-12">
                        <h2 class="text-dark">{{prod.title}}</h2>
                        {{prod.description | safe}}

                    </div>
                    <hr/>
                    <div class="col-12" id="check-val">
                        <div id="error_msg"> </div>
                    <form class="was-validated" id="form" novalidate>
                        {%for option in prod.productvariationsoptions_set.all%}
                            <h4 class="d-inline p-3">
                                {{option.name|title}}: 
                            </h4>
                            <h4 class="d-inline p-3">
                                {%for v in option.productvariationvalue_set.all%}
                                {%if option.name|title == 'Color'%}
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="{{option.name | title}}" id="{{v.product_variation_value | title}}" value="{{v.product_variation_value | title}}" required>
                                        <label class="form-check-label" for="{{v.product_variation_value | title}}">
                                            {{v.product_variation_value | title}}
                                            {%for img in prod.product_image.all%}
                                                {%if img.color == v.product_variation_value|title%}
                                                    <figure class="figure">
                                                        <img src="{{img.image.url}}" onclick="showImg(this)" class="figure-img img-fluid rounded d-inline" alt="..." style="height:40px; width:100%; object-fit:cover">
                                                        <figcaption class="figure-caption text-end"></figcaption>
                                                    </figure>

                                                {%endif%}
                                                     
                                            {%endfor%}
                                            
                                        </label>
                                        <div class="invalid-feedback"></div>
                                    </div>

                                {%else%}
                                    <div class="form-check form-check-inline was-valitated">
    
                                        <input class="form-check-input" type="radio" name="{{option.name | title}}" id="{{v.product_variation_value | title}}" value="{{v.product_variation_value | title}}" required>
                                        <label class="form-check-label" for="{{v.product_variation_value | title}}">{{v.product_variation_value | title}}</label>
                                        <div class="invalid-feedback"></div>
                                    </div>

                                {%endif%}
                                
                                 {%endfor%}
                                
                              
                            </h4>
                            <hr/>
                            <br/>
                        {%endfor%}
                       
                    </form>
                    </div>
                    
                </div>

            </div>
        </div>
        
    </div>
    <div class="container" id="two">
        
        <div class="row  justify-content-center mt-5">
            <div class="col-12">
                <h1 class="text-info text-center"> Image gallery </h1>
            </div>
            <div class="col-8">
               
                <div class="owl-carousel owl-theme" >
                    {% for img in prod.product_image.all%}
                        <div class="item"><img src="{{img.image.url}}" style='height: 350px; width: 100%; object-fit: contain'  class="figure-img img-fluid rounded" alt="..."></div>
                    {%endfor%}
                </div>
            </div>
           
        </div>
        
    </div>

    {%block owl_carousel%}
   
  
    {%endblock%}
    

    
    <script>
        const _0x55c577=_0x44d5;function _0x44d5(_0x531216,_0xa2c13d){const _0x398bc5=_0x398b();return _0x44d5=function(_0x44d584,_0x4d8c3c){_0x44d584=_0x44d584-0x136;let _0x2025e5=_0x398bc5[_0x44d584];return _0x2025e5;},_0x44d5(_0x531216,_0xa2c13d);}(function(_0x6802e6,_0x3a5252){const _0x3fa3fd=_0x44d5,_0x10ad5b=_0x6802e6();while(!![]){try{const _0x220900=-parseInt(_0x3fa3fd(0x158))/0x1+-parseInt(_0x3fa3fd(0x146))/0x2+-parseInt(_0x3fa3fd(0x136))/0x3+-parseInt(_0x3fa3fd(0x138))/0x4+parseInt(_0x3fa3fd(0x160))/0x5*(parseInt(_0x3fa3fd(0x14a))/0x6)+parseInt(_0x3fa3fd(0x156))/0x7+parseInt(_0x3fa3fd(0x13c))/0x8;if(_0x220900===_0x3a5252)break;else _0x10ad5b['push'](_0x10ad5b['shift']());}catch(_0xe1709e){_0x10ad5b['push'](_0x10ad5b['shift']());}}}(_0x398b,0x36757));let uuid=$('#u')['val']();function _0x398b(){const _0x4942b0=['split','test_public_key_2cb744b91026476980e513bd0c377ef2','CONNECT_IPS','KHALTI','token','#spin','addClass','trim','attr','/cart/transaction-failed','1295084RaYYRg','onclick','69101ttCrVD','d-none','{{uuid}}','cookie','/cart/verify/','csrftoken','success','#payment_form','58495iXktKM','1039503pEhLRA','location','1700324eAGbbw','submit','msg','getElementById','6664520cJAorB','show','post','.container','d-flex\x20justify-content-center','class','http://gameofthrones.wikia.com/wiki/Dragons','SCT','substring','length','727592ByzAdS','href','ajax','EBANKING','210jcfZWP','Dragon'];_0x398b=function(){return _0x4942b0;};return _0x398b();}function getCookie(_0x4943cb){const _0x1af256=_0x44d5;let _0x199344=null;if(document[_0x1af256(0x15b)]&&''!==document[_0x1af256(0x15b)]){const _0x5213de=document[_0x1af256(0x15b)][_0x1af256(0x14c)](';');for(let _0x3c4463=0x0;_0x3c4463<_0x5213de['length'];_0x3c4463++){const _0x121c7b=_0x5213de[_0x3c4463][_0x1af256(0x153)]();if(_0x121c7b[_0x1af256(0x144)](0x0,_0x4943cb[_0x1af256(0x145)]+0x1)===_0x4943cb+'='){_0x199344=decodeURIComponent(_0x121c7b[_0x1af256(0x144)](_0x4943cb['length']+0x1));break;}}}return _0x199344;}const csrftoken=getCookie(_0x55c577(0x15d));var config={'publicKey':_0x55c577(0x14d),'productIdentity':_0x55c577(0x15a),'productName':_0x55c577(0x14b),'productUrl':_0x55c577(0x142),'paymentPreference':[_0x55c577(0x14f),_0x55c577(0x149),'MOBILE_BANKING',_0x55c577(0x14e),_0x55c577(0x143)],'eventHandler':{'onSuccess'(_0x905522){const _0x752c3=_0x55c577;$(_0x752c3(0x13f))[_0x752c3(0x152)](_0x752c3(0x159)),$(_0x752c3(0x151))[_0x752c3(0x154)](_0x752c3(0x141),_0x752c3(0x140)),$[_0x752c3(0x148)]({'type':_0x752c3(0x13e),'url':_0x752c3(0x15c),'data':{'token':_0x905522[_0x752c3(0x150)],'amount':_0x905522['amount'],'csrfmiddlewaretoken':csrftoken},'success':_0x183268=>{const _0xbd24f3=_0x752c3;_0xbd24f3(0x15e)==_0x183268[_0xbd24f3(0x13a)]?$(_0xbd24f3(0x15f))[_0xbd24f3(0x139)]():window[_0xbd24f3(0x137)][_0xbd24f3(0x147)]=_0xbd24f3(0x155);},'error':_0x534eed=>{}});},'onError'(_0x1369c6){},'onClose'(){}}},checkout=new KhaltiCheckout(config),btn=document[_0x55c577(0x13b)]('payment-button');btn[_0x55c577(0x157)]=function(){const _0x11d508=_0x55c577;checkout[_0x11d508(0x13d)]({'amount':0x3e8});};
    </script>
    <script>
       const _0x8f8ab1=_0x10bc;(function(_0x5de14d,_0x1c4cfc){const _0x57e565=_0x10bc,_0x3f4cfa=_0x5de14d();while(!![]){try{const _0x396185=-parseInt(_0x57e565(0x121))/0x1*(parseInt(_0x57e565(0x134))/0x2)+-parseInt(_0x57e565(0x119))/0x3*(-parseInt(_0x57e565(0x11e))/0x4)+parseInt(_0x57e565(0x120))/0x5*(-parseInt(_0x57e565(0x138))/0x6)+-parseInt(_0x57e565(0x123))/0x7*(parseInt(_0x57e565(0x115))/0x8)+-parseInt(_0x57e565(0x11f))/0x9*(-parseInt(_0x57e565(0x126))/0xa)+parseInt(_0x57e565(0x12a))/0xb*(-parseInt(_0x57e565(0x139))/0xc)+parseInt(_0x57e565(0x12f))/0xd;if(_0x396185===_0x1c4cfc)break;else _0x3f4cfa['push'](_0x3f4cfa['shift']());}catch(_0x1a98c7){_0x3f4cfa['push'](_0x3f4cfa['shift']());}}}(_0x376a,0x59983));let uuid=$('#u')['val']();function getCookie(_0x28de5c){const _0x1fa841=_0x10bc;let _0x1bc388=null;if(document[_0x1fa841(0x131)]&&''!==document['cookie']){const _0xab73b2=document['cookie'][_0x1fa841(0x11a)](';');for(let _0x4aacf2=0x0;_0x4aacf2<_0xab73b2['length'];_0x4aacf2++){const _0x541f6b=_0xab73b2[_0x4aacf2]['trim']();if(_0x541f6b[_0x1fa841(0x12b)](0x0,_0x28de5c[_0x1fa841(0x114)]+0x1)===_0x28de5c+'='){_0x1bc388=decodeURIComponent(_0x541f6b[_0x1fa841(0x12b)](_0x28de5c[_0x1fa841(0x114)]+0x1));break;}}}return _0x1bc388;}function _0x10bc(_0x254813,_0x54c2cd){const _0x376a21=_0x376a();return _0x10bc=function(_0x10bcb2,_0x811333){_0x10bcb2=_0x10bcb2-0x114;let _0x4bac25=_0x376a21[_0x10bcb2];return _0x4bac25;},_0x10bc(_0x254813,_0x54c2cd);}const csrftoken=getCookie(_0x8f8ab1(0x135));var config={'publicKey':'test_public_key_2cb744b91026476980e513bd0c377ef2','productIdentity':_0x8f8ab1(0x118),'productName':_0x8f8ab1(0x130),'productUrl':_0x8f8ab1(0x11d),'paymentPreference':['KHALTI',_0x8f8ab1(0x13a),_0x8f8ab1(0x12d),_0x8f8ab1(0x132),_0x8f8ab1(0x122)],'eventHandler':{'onSuccess'(_0x465fb1){const _0xfec405=_0x8f8ab1;$('.container')[_0xfec405(0x13b)]('d-none'),$(_0xfec405(0x12e))[_0xfec405(0x11c)]('class',_0xfec405(0x136)),$[_0xfec405(0x125)]({'type':_0xfec405(0x129),'url':_0xfec405(0x128),'data':{'token':_0x465fb1['token'],'amount':_0x465fb1[_0xfec405(0x12c)],'csrfmiddlewaretoken':csrftoken},'success':_0x413c47=>{const _0x263cfa=_0xfec405;'success'==_0x413c47['msg']?$('#payment_form')[_0x263cfa(0x11b)]():window[_0x263cfa(0x133)][_0x263cfa(0x127)]=_0x263cfa(0x124);},'error':_0x3a25f4=>{}});},'onError'(_0x3f48b2){},'onClose'(){}}},checkout=new KhaltiCheckout(config),btn=document[_0x8f8ab1(0x117)](_0x8f8ab1(0x137));btn[_0x8f8ab1(0x13c)]=function(){const _0x1871ed=_0x8f8ab1;checkout[_0x1871ed(0x116)]({'amount':0x3e8});};function _0x376a(){const _0x352706=['show','getElementById','{{uuid}}','51AJVGNk','split','submit','attr','http://gameofthrones.wikia.com/wiki/Dragons','72968eVAsdk','956709MEbxET','5SkWtqg','2laRfLB','SCT','1976639ZlwDBH','/cart/transaction-failed','ajax','10wHAebW','href','/cart/verify/','post','11hbYZBq','substring','amount','MOBILE_BANKING','#spin','11964654ftUaKX','Dragon','cookie','CONNECT_IPS','location','21764PqNuxh','csrftoken','d-flex\x20justify-content-center','payment-button','2972022NjkMiq','2043792rWvHzx','EBANKING','addClass','onclick','length','8YtvIHp'];_0x376a=function(){return _0x352706;};return _0x376a();}
    </script>
{%endblock content%}
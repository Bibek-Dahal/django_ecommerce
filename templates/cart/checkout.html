{%extends 'store/base.html'%}
{%load static%} {% block title%} cart detail{%endblock title%}

{%block content%} 
    
     <div class="d-flex justify-content-center d-none text-primary" id="spin" >
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    
    
    
    <div class="container">
        <div class="row  justify-content-center p-5">
            <div class="col-lg-6 col-sm-12 card shadow mb-5 ">
                <div class="row">
                    <div class="col">
                        <h5>Please Select The Shiipng Address</h5>
                    </div>
                </div>
               <div class="row">
                    <form action="{% url 'cart:order'%}" method="post" id='payment_form' >
                            {%csrf_token%}
                            <input type="text" name="order" value="{{uuid}}" hidden>
                            {% for c in customers%}
                            <div class="form-check">
                                {%if c.id == customers.0.id%}
                                    <input class="form-check-input" type="radio" value = {{c.id}} name="id" id="{{c.id}}" checked >
                                    {%else%}
                                        <input class="form-check-input" value = {{c.id}} type="radio" name="id" id="{{c.id}}">
                                {%endif%}
                                <label class="form-check-label" for="flexRadioDefault1">
                                <h5>{{forloop.counter}}</h5>
                                </label>
                                <div class="row shadow-lg mt-2 mb-2 ">
                                    <div class="col-10 ">
                                    <h5>Name:  {{c.full_name}}</h5>
                                    </div>
                                    <div class="row mt-2 mb-2">
                                        <div class="col-10">
                                            <h5>Shipping Address: {{c.shipping_address}}</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {%endfor%}
                    </form>
               </div>
               
   
                
                <button id="payment-button" class = "btn btn-danger shadow mt-3">Pay with Khalti</button>
                
                <body>
                    <form action="https://uat.esewa.com.np/epay/main" method="POST">
                    <input value="100" name="tAmt" type="hidden">
                    <input value="90" name="amt" type="hidden">
                    <input value="5" name="txAmt" type="hidden">
                    <input value="2" name="psc" type="hidden">
                    <input value="3" name="pdc" type="hidden">
                    <input value="EPAYTEST" name="scd" type="hidden">
                    <input value="{{uuid}}" name="pid" type="hidden">
                    <input value='https://bibekecom.herokuapp.com/cart/v-esewa/?cid={{customers.0.id}}' type="hidden" name="su" class="su" id="su">
                    <input value="http://merchant.com.np/page/esewa_payment_failed?q=fu" type="hidden" name="fu">
                    <div class="d-grid gap-2"> 
                        <input value="Pay With esewa" type="submit" id="esewa-payment-button" class="btn btn-danger shadow mt-3" > 
                    </div>
                    <!-- <input value="Pay With esewa" type="submit" id="esewa-payment-button" class="btn btn-danger shadow mt-3" > -->
                    </form>
                </body>
            </div>
            <div class="col-12 col-lg-6">
                <div class="card">
                    <div class="col" id="cart_detail">
                        <div class="d-sm-flex flex-wrap card shadow">
                            <div>
                                <h1>Order Summary</h1>
                                <hr/>
                            </div>
                            <div class="d-sm-flex justify-content-between">
                                <div><h4 id="price">Price({{cart_session.show_quantity}} items)</h4></div>
                                <div><h4 id="s_total">Rs.{{cart_session.subTotal | floatformat:"2"}}</h4></div>
                            </div>
                            <div class="d-sm-flex justify-content-between">
                                <div><h4>Delivary Charge</h4></div>
                                <div><h4 id="shipping_charge">Rs.{{cart_session.showShippingCharge | floatformat:"2"}}</h4></div>
                
                            </div>
                            <hr>
                            <div class="d-sm-flex justify-content-between">
                                <div><h4>Total Charge</h4></div>
                                <div><h4 id="total_charge">Rs.{{cart_session.total | floatformat:"2"}}</h4></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            
        </div>

    </div>
    <script>
        (function(_0xaab481,_0x5308f2){var _0x2c6f88=_0x18dd,_0x25c690=_0xaab481();while(!![]){try{var _0x93ef64=parseInt(_0x2c6f88(0x175))/0x1+-parseInt(_0x2c6f88(0x182))/0x2+parseInt(_0x2c6f88(0x17e))/0x3+-parseInt(_0x2c6f88(0x180))/0x4+-parseInt(_0x2c6f88(0x181))/0x5+-parseInt(_0x2c6f88(0x183))/0x6*(-parseInt(_0x2c6f88(0x17b))/0x7)+-parseInt(_0x2c6f88(0x17a))/0x8;if(_0x93ef64===_0x5308f2)break;else _0x25c690['push'](_0x25c690['shift']());}catch(_0xaab2af){_0x25c690['push'](_0x25c690['shift']());}}}(_0x1adc,0xe7278));function _0x1adc(){var _0x27b9d8=['val','5234547QWzgCE','#sm','410700EIvQyj','3106725dRNjdo','692384kGHXrf','798joIzbF','#sm0','1662880zrDuGa','handle\x20click\x20','handle\x20click\x201','submit','#form012','23853240wJrdgx','83734PtPZlX','log'];_0x1adc=function(){return _0x27b9d8;};return _0x1adc();}function handleSearch(){var _0x20d909=_0x18dd;console['log'](_0x20d909(0x176)),0x0!=$(_0x20d909(0x174))[_0x20d909(0x17d)]()&&$(_0x20d909(0x179))[_0x20d909(0x178)]();}function _0x18dd(_0x5e1288,_0x5d5da9){var _0x1adc49=_0x1adc();return _0x18dd=function(_0x18dde0,_0x196d5f){_0x18dde0=_0x18dde0-0x174;var _0x3697dd=_0x1adc49[_0x18dde0];return _0x3697dd;},_0x18dd(_0x5e1288,_0x5d5da9);}function handleSearch1(){var _0x25c874=_0x18dd;console[_0x25c874(0x17c)](_0x25c874(0x177)),0x0!=$(_0x25c874(0x17f))[_0x25c874(0x17d)]()&&$('#form0123')[_0x25c874(0x178)]();}
    </script>
    <script src="{%static 'js/checkout.js'%}"></script>
    
{%endblock%}